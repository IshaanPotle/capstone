<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Information Chat</title>
    <style>
        /* Your CSS styles here */
    </style>
</head>
<body>
    <div id="chat-container">
        <div id="chat-display"></div>
        <input type="text" id="user-input" placeholder="Enter a word...">
        <button onclick="sendMessage()">Send</button>
    </div>
    <script>
        class CohereClient {
            constructor(options) {
                this.token = options.token;
            }

            async generate(data) {
                try {
                    const response = await fetch('https://api.cohere.ai/completions', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': 'Bearer ' + this.token
                        },
                        body: JSON.stringify(data)
                    });
                    if (!response.ok) {
                        throw new Error('Failed to fetch');
                    }
                    return await response.json();
                } catch (error) {
                    console.error('Error:', error);
                    throw error; // Rethrow the error for the caller to handle
                }
            }
        }

        const cohere = new CohereClient({
            token: "WrwwKEMSMjFySzaPxE9NmECZ6gjs4cINUtioGtNF",
        });

        async function sendMessage() {
            var userInput = document.getElementById("user-input").value;
            var chatDisplay = document.getElementById("chat-display");
        
            // Display user message
            chatDisplay.innerHTML += "<div class='user-message'>" + userInput + "</div>";
        
            try {
                // Call the Cohere API to generate response
                const generate = await cohere.generate({
                    prompt: userInput,
                });
            
                // Check if generate.completions is undefined or empty
                if (generate && generate.completions && generate.completions.length > 0) {
                    // Display chatbot response
                    chatDisplay.innerHTML += "<div class='chatbot-message'>" + generate.completions[0].text + "</div>";
                } else {
                    // Display an error message if response is not as expected
                    chatDisplay.innerHTML += "<div class='chatbot-message'>Sorry, I couldn't understand that.</div>";
                }
            } catch (error) {
                // Display error message in chat display
                chatDisplay.innerHTML += "<div class='chatbot-message'>An error occurred. Please try again later.</div>";
                console.error('Error:', error);
            }
        
            // Scroll to bottom of chat display
            chatDisplay.scrollTop = chatDisplay.scrollHeight;
        
            // Clear user input
            document.getElementById("user-input").value = "";
        }
    </script>
</body>
</html>
